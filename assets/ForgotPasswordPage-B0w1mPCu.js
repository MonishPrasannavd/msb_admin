import{_ as z,r as i,c as f,b as s,d as m,o as r,w as o,e as a,f as u,g as c,h as D,i as P,j as g,F as V,k as I,t as h}from"./index-D2pfTnFu.js";import{u as T}from"./vuex.esm-bundler-IuTXkf8E.js";const U={class:"form-content"},A={class:"back-to-login mt-4"},G={__name:"ForgotPasswordPage",setup(H){const v=T(),l=i(""),n=i(""),d=i([]),y=i(!1),k=i(""),F=i(null),B=[t=>!!t||"Email is required",t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||"Please enter a valid email address"],_=f(()=>v.getters["auth/authLoading"]);f(()=>v.getters["auth/authError"]);const R=f(()=>!!l.value&&!n.value),w=()=>l.value?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.value)?(n.value="",!0):(n.value="Please enter a valid email address",!1):(n.value="Email is required",!1),L=async()=>{if(n.value="",d.value=[],!!w())try{const t=await v.dispatch("auth/forgotPassword",{email:l.value});k.value=t.message,y.value=!0}catch(t){d.value.push(t.message||"Failed to send reset link. Please try again."),console.error("Reset link error:",t)}};return(t,e)=>{const S=s("v-text-field"),N=s("v-progress-circular"),x=s("v-btn"),b=s("v-alert"),q=s("v-icon"),C=s("v-form"),E=s("v-col"),M=s("v-row"),$=s("v-container");return r(),m($,{class:"fill-height",fluid:""},{default:o(()=>[a(M,{"no-gutters":""},{default:o(()=>[a(E,{cols:"12",md:"6",class:"login-form"},{default:o(()=>[u("div",U,[e[3]||(e[3]=u("div",{class:"logo"},[c("Msb"),u("span",{class:"dot"},".")],-1)),e[4]||(e[4]=u("h1",{class:"welcome-text"},"Forgot Password",-1)),e[5]||(e[5]=u("p",{class:"login-text"},"Enter your email to reset your password",-1)),a(C,{onSubmit:D(L,["prevent"]),ref_key:"form",ref:F},{default:o(()=>[a(S,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=p=>l.value=p),"error-messages":n.value,label:"Email","prepend-inner-icon":"mdi-email",type:"email",variant:"outlined",class:"mb-4",rules:B,onBlur:w,required:""},null,8,["modelValue","error-messages"]),a(x,{type:"submit",color:"primary",size:"large",block:"",loading:_.value,disabled:_.value||!R.value},{default:o(()=>[_.value?(r(),m(N,{key:0,indeterminate:"",color:"white"})):(r(),g(V,{key:1},[c(" Send Reset Link ")],64))]),_:1},8,["loading","disabled"]),d.value.length>0?(r(),m(b,{key:0,type:"error",class:"mt-4"},{default:o(()=>[(r(!0),g(V,null,I(d.value,(p,j)=>(r(),g("div",{key:j},h(p),1))),128))]),_:1})):P("",!0),y.value?(r(),m(b,{key:1,type:"success",class:"mt-4"},{default:o(()=>[c(h(k.value),1)]),_:1})):P("",!0),u("div",A,[a(x,{variant:"text",color:"primary",to:"/login",class:"text-none"},{default:o(()=>[a(q,{class:"mr-1"},{default:o(()=>e[1]||(e[1]=[c("mdi-arrow-left")])),_:1}),e[2]||(e[2]=c(" Back to Login "))]),_:1})])]),_:1},512)])]),_:1}),a(E,{cols:"12",md:"6",class:"login-image"})]),_:1})]),_:1})}}},O=z(G,[["__scopeId","data-v-02987ac4"]]);export{O as default};
