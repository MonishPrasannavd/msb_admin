import{_ as ze,c as b,l as Ue,u as Le,r as f,q as je,p as Fe,m as Re,v as Be,b as r,j as S,o as w,i as j,e as s,f as a,w as o,t as c,s as Ee,g as m,d as H,F as Me,k as Oe,x as g}from"./index-DinSSoxo.js";import{u as qe}from"./category-CGanrx3f.js";const Ge={class:"talent-view-container"},Pe={key:0,class:"loading-overlay"},Je={class:"d-flex justify-space-between align-center px-4 py-3"},He={class:"text-h5 font-weight-bold"},Ke={class:"talent-details pa-4"},Qe={class:"talent-avatar-container text-center mb-4"},We={class:"text-h6"},Xe={class:"talent-stats"},Ye={class:"stat-item d-flex justify-space-between align-center mb-3"},Ze={class:"stat-item d-flex justify-space-between align-center mb-3"},Te={class:"px-4 py-3"},et={class:"py-3 d-flex align-center"},tt={class:"filter-buttons d-flex align-center mr-4"},at={class:"d-flex align-center mr-4"},st={class:"d-flex align-center mr-4"},lt={class:"text-caption status-text"},nt={class:"d-flex align-center"},ot={class:"text-caption status-text"},it={class:"sub-talents-cards pa-6",style:{"overflow-y":"auto"}},ct={class:"d-flex justify-space-between align-center mb-2"},dt={class:"d-flex align-center"},rt={class:"d-flex align-center status-chip"},ut={class:"text-caption"},vt={class:"text-subtitle-1 font-weight-bold mb-2"},mt={class:"d-flex align-center text-caption text-grey mb-2"},ft={class:"mr-3"},pt={class:"mr-3"},_t={class:"d-flex align-center justify-space-between"},gt={class:"d-flex align-center"},xt={key:0,class:"timer-display"},yt={class:"d-flex align-center text-caption text-grey mb-4"},wt={class:"d-flex justify-end align-center"},Dt={class:"d-flex align-center gap-2"},ht={key:0,class:"text-center pa-8"},bt={class:"text-h5 font-weight-bold mb-4"},St={class:"d-flex flex-wrap gap-6"},Vt={class:"info-item"},kt={class:"text-subtitle-1"},Ct={class:"info-item"},At={class:"text-subtitle-1"},$t={class:"info-item"},It={class:"text-subtitle-1"},Nt={class:"info-item"},zt={class:"text-subtitle-1"},Ut={class:"info-item"},Lt={class:"text-subtitle-1"},jt={class:"info-item"},Ft={class:"text-subtitle-1 d-flex align-center"},Rt={class:"d-flex align-center justify-space-between"},Bt={class:"d-flex align-center"},Et={key:0,class:"timer-display"},Mt={__name:"TalentViewPage",setup(Ot){const _e=qe(),ge=b(()=>_e.categories),V={success:t=>console.log(`SUCCESS: ${t}`),error:t=>console.error(`ERROR: ${t}`)},K=Ue(),I=Le(),p=f(null),F=b(()=>{var t;return(t=p.value)!=null&&t.icon?`http://74.208.221.19:5566//static/media/category_images/${p.value.icon}`:null}),_=f([]),N=f(""),k=f(!1),R=f(!1),x=f(!1),B=f(!1),d=f(null),xe=f(["Grade 1-4","Grade 5-7","Grade 7-12"]),Q=f([]),u=je({name:"",grade:"",startDate:"",endDate:""}),ye=f(null),E=f(null),C=f(!1),y=f("all"),W=f(0),X=b(()=>{let t=_.value;if(N.value){const e=N.value.toLowerCase();t=t.filter(i=>{var n,v;return i.name.toLowerCase().includes(e)||((n=i.category)==null?void 0:n.toLowerCase().includes(e))||((v=i.description)==null?void 0:v.toLowerCase().includes(e))})}return y.value!=="all"&&(t=t.filter(e=>y.value==="active"?e.isActive:!e.isActive)),t}),we=b(()=>_.value.filter(t=>t.isActive).length),De=b(()=>_.value.filter(t=>!t.isActive).length),Y=b(()=>u.name.trim()&&u.grade&&u.startDate&&u.endDate),Z=()=>{C.value=!0;const t=K.params.id;if(!t){V.error("No talent ID provided. Please select a talent."),I.push("/"),C.value=!1;return}const e=JSON.parse(localStorage.getItem("talents")||"[]"),i=ge.value.find(n=>n.id==t);if(!i){V.error("Talent not found."),I.push("/"),C.value=!1;return}p.value=i,_.value=i.subcategories||[],Q.value=e.map(n=>({title:n.name,value:n.id})),C.value=!1},he=()=>{x.value=!1,Object.assign(u,{name:"",grade:"",startDate:"",endDate:""}),k.value=!0},be=t=>{x.value=!0,d.value=t,Object.assign(u,{name:t.name,grade:t.grade,startDate:t.startDate,endDate:t.endDate}),k.value=!0},Se=t=>{I.push({name:"SubTalentView",params:{talentId:p.value.id,subTalentId:t.id}})},T=()=>{k.value=!1,d.value=null},Ve=async()=>{if(Y.value){B.value=!0;try{const t={id:x.value?d.value.id:Date.now(),name:u.name.trim(),talentName:p.value.id,grade:u.grade,startDate:u.startDate,endDate:u.endDate,isActive:x.value?d.value.isActive:!0,addedDate:x.value?d.value.addedDate:new Date().toLocaleDateString(),talentId:p.value.id};if(x.value){const e=_.value.findIndex(i=>i.id===t.id);e!==-1&&(_.value[e]=t)}else _.value.push(t);localStorage.setItem(`subTalents_${p.value.id}`,JSON.stringify(_.value)),T(),V.success(`Sub-talent ${x.value?"updated":"added"} successfully!`)}catch(t){console.error("Error saving sub-talent:",t),V.error("Failed to save sub-talent. Please try again.")}finally{B.value=!1}}},ke=t=>{const e=_.value.find(i=>i.id===t);e&&(e.isActive=!e.isActive,localStorage.setItem(`subTalents_${p.value.id}`,JSON.stringify(_.value)),V.success(`Sub-talent ${e.isActive?"activated":"deactivated"} successfully!`))},ee=t=>{const e=Q.value.find(i=>i.value===t);return e?e.title:"N/A"},te=t=>{if(!t)return"N/A";const e=new Date(t);return e.toLocaleDateString()+" "+e.toLocaleTimeString()},M=t=>{y.value=t},z=t=>{if(!(t!=null&&t.startDate)||!(t!=null&&t.endDate))return"inactive";const e=new Date,i=new Date(t.startDate),n=new Date(t.endDate);return e<i?"upcoming":e>=i&&e<=n?"active":"inactive"},ae=t=>{if(!(t!=null&&t.startDate)||!(t!=null&&t.endDate))return"fa-solid fa-clock";const e=new Date,i=new Date(t.startDate),n=new Date(t.endDate);return e<i?"fa-solid fa-arrow-up":e>=i&&e<=n?"fa-solid fa-check-circle":"fa-solid fa-arrow-down"},O=t=>{const e=z(t);return e==="upcoming"||e==="active"?"text-success":e==="inactive"?"text-warning":"text-grey"},se=t=>{const e=z(t);return!(t!=null&&t.startDate)||!(t!=null&&t.endDate)?"Not Scheduled":e==="upcoming"?"Upcoming":e==="active"?"Active":"Inactive"},U=t=>O(t),q=t=>{const e=Math.floor(t/864e5),i=Math.floor(t%(1e3*60*60*24)/(1e3*60*60)),n=Math.floor(t%(1e3*60*60)/(1e3*60)),v=Math.floor(t%(1e3*60)/1e3);return e>0?`${e}d ${i}h ${n}m`:i>0?`${i}h ${n}m ${v}s`:n>0?`${n}m ${v}s`:`${v}s`},L=t=>{if(!(t!=null&&t.startDate)||!(t!=null&&t.endDate))return null;W.value;const e=new Date,i=new Date(t.startDate),n=new Date(t.endDate);return e<i?q(i-e):e>=i&&e<=n?q(n-e):q(e-n)};return Fe(()=>K.params.id,(t,e)=>{t&&t!==e&&Z()}),Re(()=>{Z(),E.value=setInterval(()=>{W.value++},1e3)}),Be(()=>{E.value&&clearInterval(E.value)}),(t,e)=>{const i=r("v-progress-circular"),n=r("font-awesome-icon"),v=r("v-btn"),Ce=r("v-img"),le=r("v-icon"),Ae=r("v-avatar"),ne=r("v-divider"),oe=r("v-chip"),A=r("v-col"),$=r("v-text-field"),G=r("v-spacer"),$e=r("v-switch"),P=r("v-card"),J=r("v-row"),ie=r("v-card-title"),Ie=r("v-select"),Ne=r("v-form"),ce=r("v-card-text"),de=r("v-card-actions"),re=r("v-dialog");return w(),S("div",Ge,[C.value?(w(),S("div",Pe,[s(i,{indeterminate:"",color:"success",size:"64"}),e[13]||(e[13]=a("p",{class:"mt-4 text-h6"},"Loading talent data...",-1))])):j("",!0),s(J,{"no-gutters":"",class:"px-2",style:{height:"100vh"}},{default:o(()=>[s(A,{cols:"3",class:"talent-info-section d-flex flex-column nav-border"},{default:o(()=>{var l,D;return[a("div",Je,[a("span",He,c(((l=p.value)==null?void 0:l.name)||"Talent"),1),s(v,{color:"success",variant:"text",size:"small",onClick:e[0]||(e[0]=h=>Ee(I).push("/categories"))},{default:o(()=>[s(n,{icon:"fa-solid fa-arrow-left",class:"mr-2"}),e[14]||(e[14]=m(" Back "))]),_:1})]),a("div",Ke,[a("div",Qe,[s(Ae,{size:"120",class:"mb-3"},{default:o(()=>[F.value?(w(),H(Ce,{key:0,src:F.value,alt:F.value,cover:""},null,8,["src","alt"])):(w(),H(le,{key:1,icon:"mdi-account",size:"60",color:"grey"}))]),_:1}),a("h3",We,c((D=p.value)==null?void 0:D.name),1)]),s(ne,{class:"mb-4"}),a("div",Xe,[a("div",Ye,[e[15]||(e[15]=a("span",{class:"text-body-2"},"Media Type:",-1)),s(oe,{color:"info",size:"small"},{default:o(()=>{var h;return[m(c(((h=p.value)==null?void 0:h.type)||"N/A"),1)]}),_:1})]),a("div",Ze,[e[16]||(e[16]=a("span",{class:"text-body-2"},"Total Sub-talents:",-1)),s(oe,{color:"success",size:"small"},{default:o(()=>[m(c(_.value.length||"see shit"),1)]),_:1})])])]),a("div",Te,[s(v,{color:"success",class:"text-none add-sub-talent-btn",onClick:he,size:"large",block:""},{default:o(()=>[s(n,{icon:"fa-solid fa-plus",class:"mr-2"}),e[17]||(e[17]=m(" Add Sub-talent "))]),_:1})])]}),_:1}),s(A,{cols:"9",class:"content-section px-5"},{default:o(()=>[a("div",et,[s($,{modelValue:N.value,"onUpdate:modelValue":e[1]||(e[1]=l=>N.value=l),placeholder:"Search sub-talents...",variant:"solo",rounded:"lg",density:"compact","hide-details":"",class:"mr-4 border-0 input-search","bg-color":"white",style:{"max-width":"450px"}},{"prepend-inner":o(()=>[s(n,{icon:"fa-solid fa-search",class:"search-icon"})]),_:1},8,["modelValue"]),a("div",tt,[s(n,{icon:"fa-solid fa-filter",class:"filter-icon mr-2"}),s(v,{variant:y.value==="all"?"flat":"outlined",color:y.value==="all"?"success":"grey",size:"small",class:"mr-2",onClick:e[2]||(e[2]=l=>M("all"))},{default:o(()=>e[18]||(e[18]=[m(" All ")])),_:1},8,["variant","color"]),s(v,{variant:y.value==="active"?"flat":"outlined",color:y.value==="active"?"success":"grey",size:"small",class:"mr-2",onClick:e[3]||(e[3]=l=>M("active"))},{default:o(()=>e[19]||(e[19]=[m(" Active ")])),_:1},8,["variant","color"]),s(v,{variant:y.value==="inactive"?"flat":"outlined",color:y.value==="inactive"?"success":"grey",size:"small",onClick:e[4]||(e[4]=l=>M("inactive"))},{default:o(()=>e[20]||(e[20]=[m(" Inactive ")])),_:1},8,["variant","color"])]),s(G),a("div",at,[a("div",st,[s(n,{icon:"fa-solid fa-circle",class:"mr-1 text-success"}),a("span",lt,"Active("+c(we.value)+")",1)]),a("div",nt,[s(n,{icon:"fa-solid fa-circle",class:"mr-1 text-warning"}),a("span",ot,"Inactive("+c(De.value)+")",1)])])]),a("div",it,[s(J,null,{default:o(()=>[(w(!0),S(Me,null,Oe(X.value,l=>(w(),H(A,{key:l.id,cols:"12",md:"6"},{default:o(()=>[s(P,{flat:"",class:"pa-4 rounded-lg sub-talent-card"},{default:o(()=>[a("div",ct,[a("div",dt,[s($e,{"model-value":l.isActive,color:"success","hide-details":"",density:"compact",inset:"",class:"compact-switch mr-3",style:{transform:"scale(0.8)","transform-origin":"left center"},"onUpdate:modelValue":D=>ke(l.id)},null,8,["model-value","onUpdate:modelValue"]),a("div",rt,[s(n,{icon:["fas","circle"],class:g([l.isActive?"text-success":"text-warning","mr-1"]),size:"sm"},null,8,["class"]),a("span",ut,c(l.isActive?"Active":"Inactive"),1)])])]),a("div",vt,c(l.name),1),a("div",mt,[a("span",ft,[s(n,{icon:"fa-solid fa-user",class:"mr-1"}),m(" "+c(ee(l.talentName)),1)]),s(ne,{vertical:"",class:"mx-2"}),a("span",pt,[s(n,{icon:"fa-solid fa-graduation-cap",class:"mr-1"}),m(" "+c(l.grade),1)])]),a("div",{class:g(["timer-section mb-3 pa-2 rounded",z(l)])},[a("div",_t,[a("div",gt,[s(n,{icon:ae(l),class:g([O(l),"mr-2"]),size:"sm"},null,8,["icon","class"]),a("span",{class:g(["text-caption font-weight-medium",U(l)])},c(se(l)),3)]),L(l)?(w(),S("div",xt,[a("span",{class:g(["text-caption font-weight-bold",U(l)])},c(L(l)),3)])):j("",!0)])],2),a("div",yt,[a("span",null,c(l.addedDate),1)]),a("div",wt,[a("div",Dt,[s(v,{variant:"text",class:"action-btn view-btn",size:"small",onClick:D=>Se(l)},{default:o(()=>[s(n,{icon:"fa-solid fa-eye",class:"mr-2"}),e[21]||(e[21]=m(" View "))]),_:2},1032,["onClick"]),s(v,{variant:"text",class:"action-btn edit-btn",size:"small",onClick:D=>be(l)},{default:o(()=>[s(n,{icon:"fa-solid fa-pencil",class:"mr-2"}),e[22]||(e[22]=m(" Edit "))]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),X.value.length===0?(w(),S("div",ht,[s(le,{icon:"mdi-account-group-outline",size:"64",color:"grey",class:"mb-4"}),e[23]||(e[23]=a("h3",{class:"text-h6 text-grey-darken-1 mb-2"},"No Sub-talents Found",-1)),e[24]||(e[24]=a("p",{class:"text-body-1 text-grey"},'Click "Add Sub-talent" to get started',-1))])):j("",!0)])]),_:1})]),_:1}),s(re,{modelValue:k.value,"onUpdate:modelValue":e[10]||(e[10]=l=>k.value=l),"max-width":"600",persistent:""},{default:o(()=>[s(P,{class:"sub-talent-dialog"},{default:o(()=>[s(ie,{class:"text-h5 pa-4"},{default:o(()=>[m(c(x.value?"Edit":"Add")+" Sub-talent ",1)]),_:1}),s(ce,{class:"pa-4"},{default:o(()=>[s(Ne,{ref_key:"subTalentFormRef",ref:ye},{default:o(()=>[s($,{modelValue:u.name,"onUpdate:modelValue":e[5]||(e[5]=l=>u.name=l),label:"Sub-talent Name",variant:"outlined",density:"comfortable",placeholder:"Enter sub-talent name",class:"mb-4",required:""},null,8,["modelValue"]),s($,{modelValue:p.value.name,"onUpdate:modelValue":e[6]||(e[6]=l=>p.value.name=l),label:"Talent Name",variant:"outlined",density:"comfortable",readonly:"",class:"mb-4"},null,8,["modelValue"]),s(Ie,{modelValue:u.grade,"onUpdate:modelValue":e[7]||(e[7]=l=>u.grade=l),items:xe.value,label:"Grade",variant:"outlined",density:"comfortable",placeholder:"Select grade",class:"mb-4",required:""},null,8,["modelValue","items"]),s(J,null,{default:o(()=>[s(A,{cols:"6"},{default:o(()=>[s($,{modelValue:u.startDate,"onUpdate:modelValue":e[8]||(e[8]=l=>u.startDate=l),label:"Start Date",variant:"outlined",density:"comfortable",type:"datetime-local",placeholder:"Select start date",class:"mb-4",required:""},null,8,["modelValue"])]),_:1}),s(A,{cols:"6"},{default:o(()=>[s($,{modelValue:u.endDate,"onUpdate:modelValue":e[9]||(e[9]=l=>u.endDate=l),label:"End Date",variant:"outlined",density:"comfortable",type:"datetime-local",placeholder:"Select end date",class:"mb-4",required:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},512)]),_:1}),s(de,{class:"pa-4"},{default:o(()=>[s(G),s(v,{color:"grey-darken-1",variant:"text",onClick:T},{default:o(()=>e[25]||(e[25]=[m(" Cancel ")])),_:1}),s(v,{color:"success",variant:"flat",onClick:Ve,loading:B.value,disabled:!Y.value,class:"add-sub-talent-btn-dialog"},{default:o(()=>[m(c(x.value?"Update":"Add")+" Sub-talent ",1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(re,{modelValue:R.value,"onUpdate:modelValue":e[12]||(e[12]=l=>R.value=l),width:"700"},{default:o(()=>[s(P,{class:"sub-talent-view-dialog"},{default:o(()=>[s(ie,{class:"d-flex flex-column align-start pa-6"},{default:o(()=>{var l,D,h,ue,ve,me,fe,pe;return[a("div",bt,c((l=d.value)==null?void 0:l.name),1),a("div",St,[a("div",Vt,[e[26]||(e[26]=a("div",{class:"text-caption text-medium-emphasis"},"Talent",-1)),a("div",kt,c(ee((D=d.value)==null?void 0:D.talentName)),1)]),a("div",Ct,[e[27]||(e[27]=a("div",{class:"text-caption text-medium-emphasis"},"Grade",-1)),a("div",At,c((h=d.value)==null?void 0:h.grade),1)]),a("div",$t,[e[28]||(e[28]=a("div",{class:"text-caption text-medium-emphasis"},"Start Date",-1)),a("div",It,c(te((ue=d.value)==null?void 0:ue.startDate)),1)]),a("div",Nt,[e[29]||(e[29]=a("div",{class:"text-caption text-medium-emphasis"},"End Date",-1)),a("div",zt,c(te((ve=d.value)==null?void 0:ve.endDate)),1)]),a("div",Ut,[e[30]||(e[30]=a("div",{class:"text-caption text-medium-emphasis"},"Added Date",-1)),a("div",Lt,c((me=d.value)==null?void 0:me.addedDate),1)]),a("div",jt,[e[31]||(e[31]=a("div",{class:"text-caption text-medium-emphasis"},"Status",-1)),a("div",Ft,[s(n,{icon:["fas","circle"],class:g([(fe=d.value)!=null&&fe.isActive?"text-success":"text-warning","mr-2"]),size:"sm"},null,8,["class"]),m(" "+c((pe=d.value)!=null&&pe.isActive?"Active":"Inactive"),1)])])])]}),_:1}),s(ce,{class:"pa-6 pt-0"},{default:o(()=>[a("div",{class:g(["timer-section mb-4 pa-3 rounded",z(d.value)])},[a("div",Rt,[a("div",Bt,[s(n,{icon:ae(d.value),class:g([O(d.value),"mr-2"]),size:"sm"},null,8,["icon","class"]),a("span",{class:g(["text-subtitle-2 font-weight-medium",U(d.value)])},c(se(d.value)),3)]),L(d.value)?(w(),S("div",Et,[a("span",{class:g(["text-subtitle-2 font-weight-bold",U(d.value)])},c(L(d.value)),3)])):j("",!0)])],2)]),_:1}),s(de,{class:"pa-6 pt-0"},{default:o(()=>[s(G),s(v,{color:"success",variant:"text",onClick:e[11]||(e[11]=l=>R.value=!1)},{default:o(()=>e[32]||(e[32]=[m(" Close ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Pt=ze(Mt,[["__scopeId","data-v-f5d27f85"]]);export{Pt as default};
