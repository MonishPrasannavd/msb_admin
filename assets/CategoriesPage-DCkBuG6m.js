import{c as V,r as v,p as Q,m as W,b as n,j as X,o as b,f as x,e as t,w as a,g as s,d as I,i as z,t as _,s as Z,h}from"./index-D2pfTnFu.js";import{u as ee}from"./category-ihc3nzu2.js";const te={class:"pa-5"},le={class:"text-h6"},ae={class:"d-flex align-center gap-4"},ie={__name:"CategoriesPage",setup(oe){const i=ee(),A=V(()=>i.categories),c=V(()=>i.pagination),o=v({id:null,name:"",icon:"",is_future:0,type:0}),f=v(""),D=v({page:1,itemsPerPage:10,sortBy:[],sortDesc:[]}),p=v(!1),j=V(()=>i.loading),q=[{title:"Name",value:"name"},{title:"Icon",value:"icon"},{title:"Is Future",value:"is_future"},{title:"Type",value:"type"},{title:"Actions",value:"actions",sortable:!1}],d=(u=1)=>{i.fetchCategories({page:u,per_page:c.value.per_page||10,search:f.value})};Q(D,d,{deep:!0}),W(d);const w=async()=>{o.value.id?await i.updateCategory(o.value.id,o.value):await i.createCategory(o.value),y(),g(),d()},E=async u=>{await i.deleteCategory(u),d()},k=(u=null)=>{u?o.value={...u}:y(),p.value=!0},g=()=>{p.value=!1,y()},y=()=>{o.value={id:null,name:"",icon:null,is_future:!1,type:0}};return(u,e)=>{var S,T,B;const N=n("v-text-field"),m=n("v-icon"),r=n("v-btn"),C=n("v-divider"),F=n("v-img"),U=n("v-chip"),P=n("v-data-table"),$=n("v-card-title"),M=n("v-file-input"),O=n("v-switch"),R=n("v-select"),Y=n("v-form"),G=n("v-card-text"),H=n("v-card-actions"),J=n("v-card"),K=n("v-dialog");return b(),X("div",te,[e[15]||(e[15]=x("h2",{class:"mb-4"},"Categories",-1)),t(N,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=l=>f.value=l),label:"Search by name",class:"mb-4",clearable:"",onInput:d},null,8,["modelValue"]),t(r,{color:"primary",class:"mb-4",onClick:e[1]||(e[1]=l=>k())},{default:a(()=>[t(m,{left:""},{default:a(()=>e[7]||(e[7]=[s("mdi-plus")])),_:1}),e[8]||(e[8]=s(" Add Category "))]),_:1}),t(C,{class:"my-6"}),t(P,{items:A.value,headers:q,loading:Z(i).loading,"items-per-page":((S=c.value)==null?void 0:S.per_page)||10,page:((T=c.value)==null?void 0:T.page)||1,"server-items-length":((B=c.value)==null?void 0:B.total)||0,"onUpdate:page":d},{"item.actions":a(({item:l})=>[t(r,{icon:"",onClick:L=>k(l)},{default:a(()=>[t(m,null,{default:a(()=>e[9]||(e[9]=[s("mdi-pencil")])),_:1})]),_:2},1032,["onClick"]),t(r,{icon:"",color:"red",onClick:L=>E(l.id)},{default:a(()=>[t(m,null,{default:a(()=>e[10]||(e[10]=[s("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),"item.icon":a(({item:l})=>[t(F,{width:50,cover:"",src:l.icon_url},null,8,["src"])]),"item.name":a(({item:l})=>[t(r,{to:{name:"TalentView",params:{id:l.id}},variant:"flat",color:"primary",size:"small"},{default:a(()=>[s(_(l.name),1)]),_:2},1032,["to"])]),"item.is_future":a(({item:l})=>[l.is_future==0?(b(),I(U,{key:0,variant:"flat",color:"red",size:"small"},{default:a(()=>e[11]||(e[11]=[s(" NO ")])),_:1})):z("",!0),l.is_future==1?(b(),I(U,{key:1,variant:"flat",color:"green",size:"small"},{default:a(()=>e[12]||(e[12]=[s(" YES ")])),_:1})):z("",!0)]),_:1},8,["items","loading","items-per-page","page","server-items-length"]),t(K,{modelValue:p.value,"onUpdate:modelValue":e[6]||(e[6]=l=>p.value=l),"max-width":"480"},{default:a(()=>[t(J,null,{default:a(()=>[t($,{class:"justify-space-between align-center"},{default:a(()=>[x("span",le,_(o.value.id?"Edit Category":"Add Category"),1),t(r,{icon:"",onClick:g,variant:"text"},{default:a(()=>[t(m,null,{default:a(()=>e[13]||(e[13]=[s("mdi-close")])),_:1})]),_:1})]),_:1}),t(C),t(G,null,{default:a(()=>[t(Y,{ref:"formRef",onSubmit:h(w,["prevent"]),class:"d-flex flex-column gap-4"},{default:a(()=>[t(N,{modelValue:o.value.name,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.name=l),label:"Category Name",rules:[l=>!!l||"Name is required"],required:"","prepend-inner-icon":"mdi-tag"},null,8,["modelValue","rules"]),t(M,{modelValue:o.value.icon,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.icon=l),label:"Category Icon",accept:"image/*",multiple:!1,clearable:"","show-size":"","prepend-icon":"mdi-image"},null,8,["modelValue"]),x("div",ae,[t(O,{modelValue:o.value.is_future,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.is_future=l),label:"Is Future?",inset:""},null,8,["modelValue"]),t(R,{modelValue:o.value.type,"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.type=l),items:[{title:"Type 0",value:0},{title:"Type 1",value:1},{title:"Type 2",value:2}],label:"Type",class:"flex-grow-1",required:""},null,8,["modelValue"])])]),_:1},512)]),_:1}),t(C),t(H,{class:"justify-end"},{default:a(()=>[t(r,{variant:"text",onClick:g},{default:a(()=>e[14]||(e[14]=[s("Cancel")])),_:1}),t(r,{color:"primary",loading:j.value,onClick:w,variant:"flat"},{default:a(()=>[t(m,{left:""},{default:a(()=>[s(_(o.value.id?"mdi-content-save":"mdi-plus"),1)]),_:1}),s(" "+_(o.value.id?"Update":"Add"),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{ie as default};
