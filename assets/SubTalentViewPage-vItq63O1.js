import{_ as ft,l as gt,u as xt,r as w,c as A,m as bt,v as ht,b as r,j as p,o as u,i as P,e as a,f as s,w as l,g as v,t as i,x as y,d as x,F as q,k as H}from"./index-D2pfTnFu.js";const wt={class:"sub-talent-view-container"},yt={key:0,class:"loading-overlay"},kt={class:"header-section mb-6"},Dt={class:"d-flex align-center mb-4"},St={class:"text-h4 font-weight-bold"},Tt={class:"d-flex align-center justify-space-between"},It={class:"d-flex align-center"},$t={class:"d-flex align-center status-chip"},zt={class:"text-caption"},Ct={class:"d-flex align-center"},Nt={key:0,class:"timer-display ml-3"},At={class:"detail-item mb-4"},Pt={class:"text-subtitle-1 font-weight-medium"},jt={class:"detail-item mb-4"},Bt={class:"text-subtitle-1 font-weight-medium"},Lt={class:"detail-item mb-4"},Jt={class:"text-subtitle-1 font-weight-medium"},Mt={class:"detail-item mb-4"},Ot={class:"text-subtitle-1 font-weight-medium"},Vt={class:"detail-item mb-4"},Et={class:"text-subtitle-1 font-weight-medium"},Rt={class:"detail-item mb-4"},Ut={class:"text-subtitle-1 font-weight-medium text-success"},Ft={key:0,class:"text-center pa-8"},Gt={class:"d-flex align-center"},Wt={class:"text-subtitle-2 font-weight-medium"},Yt={key:0,class:"text-center pa-4"},qt={key:1},Ht={class:"d-flex align-center"},Kt={class:"flex-grow-1"},Qt={class:"text-subtitle-1 font-weight-medium"},Xt={class:"text-caption text-grey"},Zt={class:"likes-count"},te={class:"text-h6 font-weight-bold"},ee={class:"stat-item d-flex justify-space-between align-center mb-4"},se={class:"stat-item d-flex justify-space-between align-center mb-4"},ae={class:"stat-item d-flex justify-space-between align-center mb-4"},le={class:"stat-item d-flex justify-space-between align-center"},ne={__name:"SubTalentViewPage",setup(oe){const $={success:e=>console.log(`SUCCESS: ${e}`),error:e=>console.error(`ERROR: ${e}`)},j=gt(),z=xt(),f=w(null),n=w(null),_=w([]),k=w(!1),C=w(null),B=w(0),L=A(()=>[..._.value].sort((e,t)=>t.likes-e.likes).slice(0,3)),J=A(()=>_.value.reduce((e,t)=>e+t.likes,0)),K=A(()=>_.value.length===0?0:Math.round(J.value/_.value.length)),Q=()=>{k.value=!0;const e=j.params.talentId,t=parseInt(j.params.subTalentId),d=JSON.parse(localStorage.getItem("talents")||"[]");if(f.value=d.find(m=>m.id==e),!f.value){$.error("Talent not found"),z.push("/"),k.value=!1;return}const c=JSON.parse(localStorage.getItem(`subTalents_${e}`)||"[]");if(n.value=c.find(m=>m.id===t),!n.value){$.error("Sub-talent not found"),z.push(`/talents/${e}`),k.value=!1;return}X(),k.value=!1},X=()=>{const e=[{id:1,name:"John Smith",email:"john.smith@example.com",likes:45,avatar:null},{id:2,name:"Sarah Johnson",email:"sarah.j@example.com",likes:38,avatar:null},{id:3,name:"Mike Davis",email:"mike.davis@example.com",likes:32,avatar:null},{id:4,name:"Emily Wilson",email:"emily.w@example.com",likes:28,avatar:null},{id:5,name:"Alex Brown",email:"alex.brown@example.com",likes:25,avatar:null}],t=localStorage.getItem(`participants_${n.value.id}`);_.value=t?JSON.parse(t):e,t||localStorage.setItem(`participants_${n.value.id}`,JSON.stringify(e))},Z=()=>{f.value&&z.push(`/talents/${f.value.id}`)},tt=()=>{if(n.value){n.value.isActive=!n.value.isActive;const e=JSON.parse(localStorage.getItem(`subTalents_${f.value.id}`)||"[]"),t=e.findIndex(d=>d.id===n.value.id);t!==-1&&(e[t]=n.value,localStorage.setItem(`subTalents_${f.value.id}`,JSON.stringify(e))),$.success(`Sub-talent ${n.value.isActive?"activated":"deactivated"} successfully!`)}},et=e=>["warning","grey","brown"][e]||"grey",st=e=>["gold","silver","bronze"][e]||"grey",at=()=>{var c,m;if(!((c=n.value)!=null&&c.startDate)||!((m=n.value)!=null&&m.endDate))return"grey";const e=new Date,t=new Date(n.value.startDate),d=new Date(n.value.endDate);return e<t?"warning":e>=t&&e<=d?"success":"error"},lt=()=>{var c,m;if(!((c=n.value)!=null&&c.startDate)||!((m=n.value)!=null&&m.endDate))return"Not Scheduled";const e=new Date,t=new Date(n.value.startDate),d=new Date(n.value.endDate);return e<t?"Upcoming":e>=t&&e<=d?"Active":"Ended"},M=e=>{if(!e)return"N/A";const t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString()},N=e=>{const t=Math.floor(e/864e5),d=Math.floor(e%(1e3*60*60*24)/(1e3*60*60)),c=Math.floor(e%(1e3*60*60)/(1e3*60)),m=Math.floor(e%(1e3*60)/1e3);return t>0?`${t}d ${d}h ${c}m`:d>0?`${d}h ${c}m ${m}s`:c>0?`${c}m ${m}s`:`${m}s`},O=e=>{if(B.value,!(e!=null&&e.startDate)||!(e!=null&&e.endDate))return null;const t=new Date,d=new Date(e.startDate),c=new Date(e.endDate);return t<d?N(d-t):t>=d&&t<=c?N(c-t):N(t-c)},nt=e=>{},ot=e=>{},it=e=>{},ct=e=>{},V=e=>{};return bt(()=>{Q(),C.value=setInterval(()=>{B.value++},1e3)}),ht(()=>{C.value&&clearInterval(C.value)}),(e,t)=>{const d=r("v-progress-circular"),c=r("font-awesome-icon"),m=r("v-btn"),rt=r("v-divider"),dt=r("v-switch"),S=r("v-card-title"),g=r("v-col"),E=r("v-row"),T=r("v-card-text"),I=r("v-card"),b=r("v-icon"),R=r("v-img"),U=r("v-avatar"),D=r("v-chip"),ut=r("v-list-item-title"),mt=r("v-list-item-subtitle"),vt=r("v-list-item"),_t=r("v-list"),pt=r("v-container");return u(),p("div",wt,[k.value?(u(),p("div",yt,[a(d,{indeterminate:"",color:"success",size:"64"}),t[0]||(t[0]=s("p",{class:"mt-4 text-h6"},"Loading sub-talent data...",-1))])):P("",!0),a(pt,{fluid:"",class:"pa-6",style:{"min-height":"100vh"}},{default:l(()=>{var F,G,W,Y;return[s("div",kt,[s("div",Dt,[a(m,{color:"success",variant:"text",size:"small",onClick:Z,class:"mr-4"},{default:l(()=>{var o;return[a(c,{icon:"fa-solid fa-arrow-left",class:"mr-2"}),v(" Back to "+i((o=f.value)==null?void 0:o.name),1)]}),_:1}),a(rt,{vertical:"",class:"mx-4"}),s("h1",St,i((F=n.value)==null?void 0:F.name),1)]),s("div",Tt,[s("div",It,[a(dt,{"model-value":(G=n.value)==null?void 0:G.isActive,color:"success","hide-details":"",density:"compact",inset:"",class:"compact-switch mr-3",style:{transform:"scale(0.8)","transform-origin":"left center"},"onUpdate:modelValue":tt},null,8,["model-value"]),s("div",$t,[a(c,{icon:["fas","circle"],class:y([(W=n.value)!=null&&W.isActive?"text-success":"text-warning","mr-1"]),size:"sm"},null,8,["class"]),s("span",zt,i((Y=n.value)!=null&&Y.isActive?"Active":"Inactive"),1)])]),s("div",{class:y(["timer-section pa-3 rounded",nt(n.value)])},[s("div",Ct,[a(c,{icon:ot(n.value),class:y([it(n.value),"mr-2"]),size:"sm"},null,8,["icon","class"]),s("span",{class:y(["text-subtitle-2 font-weight-medium",V(n.value)])},i(ct(n.value)),3),O(n.value)?(u(),p("div",Nt,[s("span",{class:y(["text-subtitle-2 font-weight-bold",V(n.value)])},i(O(n.value)),3)])):P("",!0)])],2)])]),a(E,null,{default:l(()=>[a(g,{cols:"12",md:"8"},{default:l(()=>[a(I,{class:"details-card mb-6"},{default:l(()=>[a(S,{class:"text-h5 pa-6 pb-4"},{default:l(()=>t[1]||(t[1]=[v(" Sub-talent Details ")])),_:1}),a(T,{class:"pa-6 pt-0"},{default:l(()=>[a(E,null,{default:l(()=>[a(g,{cols:"6"},{default:l(()=>{var o;return[s("div",At,[t[2]||(t[2]=s("div",{class:"text-caption text-medium-emphasis"},"Talent",-1)),s("div",Pt,i((o=f.value)==null?void 0:o.name),1)])]}),_:1}),a(g,{cols:"6"},{default:l(()=>{var o;return[s("div",jt,[t[3]||(t[3]=s("div",{class:"text-caption text-medium-emphasis"},"Grade",-1)),s("div",Bt,i((o=n.value)==null?void 0:o.grade),1)])]}),_:1}),a(g,{cols:"6"},{default:l(()=>{var o;return[s("div",Lt,[t[4]||(t[4]=s("div",{class:"text-caption text-medium-emphasis"},"Start Date",-1)),s("div",Jt,i(M((o=n.value)==null?void 0:o.startDate)),1)])]}),_:1}),a(g,{cols:"6"},{default:l(()=>{var o;return[s("div",Mt,[t[5]||(t[5]=s("div",{class:"text-caption text-medium-emphasis"},"End Date",-1)),s("div",Ot,i(M((o=n.value)==null?void 0:o.endDate)),1)])]}),_:1}),a(g,{cols:"6"},{default:l(()=>{var o;return[s("div",Vt,[t[6]||(t[6]=s("div",{class:"text-caption text-medium-emphasis"},"Added Date",-1)),s("div",Et,i((o=n.value)==null?void 0:o.addedDate),1)])]}),_:1}),a(g,{cols:"6"},{default:l(()=>[s("div",Rt,[t[7]||(t[7]=s("div",{class:"text-caption text-medium-emphasis"},"Total Participants",-1)),s("div",Ut,i(_.value.length),1)])]),_:1})]),_:1})]),_:1})]),_:1}),a(I,{class:"participants-card"},{default:l(()=>[a(S,{class:"d-flex justify-space-between align-center pa-6 pb-4"},{default:l(()=>t[8]||(t[8]=[s("span",{class:"text-h5"},"All Participants",-1)])),_:1}),a(T,{class:"pa-6 pt-0"},{default:l(()=>[_.value.length===0?(u(),p("div",Ft,[a(b,{icon:"mdi-account-group-outline",size:"64",color:"grey",class:"mb-4"}),t[9]||(t[9]=s("h3",{class:"text-h6 text-grey-darken-1 mb-2"},"No Participants Yet",-1)),t[10]||(t[10]=s("p",{class:"text-body-1 text-grey"},"Be the first to participate!",-1))])):(u(),x(_t,{key:1},{default:l(()=>[(u(!0),p(q,null,H(_.value,(o,h)=>(u(),x(vt,{key:o.id,class:"participant-item mb-2"},{prepend:l(()=>[a(U,{size:"40",class:"mr-3"},{default:l(()=>[o.avatar?(u(),x(R,{key:0,src:o.avatar,cover:""},null,8,["src"])):(u(),x(b,{key:1,icon:"mdi-account",color:"grey"}))]),_:2},1024)]),append:l(()=>[s("div",Gt,[a(b,{icon:"mdi-thumb-up",color:"success",size:"small",class:"mr-1"}),s("span",Wt,i(o.likes),1)])]),default:l(()=>[a(ut,{class:"font-weight-medium"},{default:l(()=>[v(i(o.name)+" ",1),h<3?(u(),x(D,{key:0,color:et(h),size:"small",class:"ml-2"},{default:l(()=>[v(" #"+i(h+1),1)]),_:2},1032,["color"])):P("",!0)]),_:2},1024),a(mt,{class:"text-grey"},{default:l(()=>[v(i(o.email),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1}),a(g,{cols:"12",md:"4"},{default:l(()=>[a(I,{class:"top-participants-card mb-6"},{default:l(()=>[a(S,{class:"text-h5 pa-6 pb-4"},{default:l(()=>[a(c,{icon:"fa-solid fa-trophy",class:"mr-2 text-warning"}),t[11]||(t[11]=v(" Top 3 Participants "))]),_:1}),a(T,{class:"pa-6 pt-0"},{default:l(()=>[L.value.length===0?(u(),p("div",Yt,[a(b,{icon:"mdi-trophy-outline",size:"48",color:"grey",class:"mb-2"}),t[12]||(t[12]=s("p",{class:"text-grey"},"No participants yet",-1))])):(u(),p("div",qt,[(u(!0),p(q,null,H(L.value,(o,h)=>(u(),p("div",{key:o.id,class:"top-participant-item mb-4"},[s("div",Ht,[s("div",{class:y(["rank-badge mr-3",st(h)])},i(h+1),3),a(U,{size:"50",class:"mr-3"},{default:l(()=>[o.avatar?(u(),x(R,{key:0,src:o.avatar,cover:""},null,8,["src"])):(u(),x(b,{key:1,icon:"mdi-account",color:"grey"}))]),_:2},1024),s("div",Kt,[s("div",Qt,i(o.name),1),s("div",Xt,i(o.email),1)]),s("div",Zt,[a(b,{icon:"mdi-thumb-up",color:"success",size:"small",class:"mr-1"}),s("span",te,i(o.likes),1)])])]))),128))]))]),_:1})]),_:1}),a(I,{class:"stats-card"},{default:l(()=>[a(S,{class:"text-h5 pa-6 pb-4"},{default:l(()=>[a(c,{icon:"fa-solid fa-chart-bar",class:"mr-2 text-info"}),t[13]||(t[13]=v(" Statistics "))]),_:1}),a(T,{class:"pa-6 pt-0"},{default:l(()=>[s("div",ee,[t[14]||(t[14]=s("span",{class:"text-body-1"},"Total Participants",-1)),a(D,{color:"success",size:"small"},{default:l(()=>[v(i(_.value.length),1)]),_:1})]),s("div",se,[t[15]||(t[15]=s("span",{class:"text-body-1"},"Total Likes",-1)),a(D,{color:"info",size:"small"},{default:l(()=>[v(i(J.value),1)]),_:1})]),s("div",ae,[t[16]||(t[16]=s("span",{class:"text-body-1"},"Average Likes",-1)),a(D,{color:"warning",size:"small"},{default:l(()=>[v(i(K.value),1)]),_:1})]),s("div",le,[t[17]||(t[17]=s("span",{class:"text-body-1"},"Competition Status",-1)),a(D,{color:at(),size:"small"},{default:l(()=>[v(i(lt()),1)]),_:1},8,["color"])])]),_:1})]),_:1})]),_:1})]),_:1})]}),_:1})])}}},ce=ft(ne,[["__scopeId","data-v-20e6dec7"]]);export{ce as default};
