import{_ as H,u as K,r as k,q as N,c as W,m as X,b as u,j as v,o as f,f as s,e as o,g as p,w as l,s as Y,t as z,F as x,k as h,x as G}from"./index-DinSSoxo.js";const Z={class:"edit-quiz-container pa-6"},ee={class:"d-flex align-center justify-space-between mb-6"},te={class:"edit-form-container"},oe={class:"d-flex justify-space-between align-center mb-4"},se={class:"text-success"},ae={class:"questions-container"},ne={class:"d-flex align-center mb-4"},ie={class:"question-number"},le={class:"options-grid"},re=["onClick"],de={class:"option-key"},ce={class:"d-flex justify-end mt-2"},ue={class:"d-flex justify-center mt-6 gap-4"},me={class:"options-section mb-4"},pe={class:"options-grid"},ve=["onClick"],fe={class:"option-key"},ge={__name:"EditQuizPage",setup(_e){const C=K(),V=k(!1),D=["Maths","Science","GK","History","Social Studies"],U=["Grade 1","Grade 2","Grade 3","Grade 4","Grade 5","Grade 6","Grade 7","Grade 8","Grade 9","Grade 10"],Q=k(!1),d=N({text:"",options:["","","",""],correct:null}),t=N({id:null,name:"",category:"",grade:"",duration:45,questions:[]}),w=W(()=>d.text.trim()!==""&&d.options.every(i=>i.trim()!=="")&&d.correct!==null),E=()=>{try{const i=sessionStorage.getItem("editQuizData");if(i){const e=JSON.parse(i);t.id=e.id,t.name=e.name||"",t.category=e.category||"",t.grade=e.grade||"",t.duration=e.duration||45,t.questions=(e.savedQuestions||[]).map(r=>({text:r.question||r.text||"",options:r.options||["","","",""],correct:r.correct||null})),sessionStorage.removeItem("editQuizData")}else alert("No quiz data found. Redirecting..."),C.push("/quizzes")}catch(i){console.error("Error loading quiz:",i),alert("Failed to load quiz data. Redirecting..."),C.push("/quizzes")}},O=async()=>{try{if(V.value=!0,!t.name||!t.category||!t.grade||t.questions.length===0){alert("Please fill in all quiz details and add at least one question.");return}if(t.questions.find(a=>!a.text||a.options.some(m=>!m)||!a.correct)){alert("Please complete all questions with text, four options, and a correct answer.");return}const e=JSON.parse(sessionStorage.getItem("quizzes")||"[]"),r=e.findIndex(a=>a.id===t.id);if(r!==-1){const a=t.questions.map(_=>({question:_.text,options:_.options,correct:_.correct})),m={...e[r],name:t.name,category:t.category,grade:t.grade,duration:t.duration,questions:a.length,savedQuestions:a,lastModified:new Date().toISOString()};e[r]=m,sessionStorage.setItem("quizzes",JSON.stringify(e));const g=JSON.parse(sessionStorage.getItem("categoryQuestions")||"{}");g[t.category]=a,sessionStorage.setItem("categoryQuestions",JSON.stringify(g))}await new Promise(a=>setTimeout(a,1e3)),alert("Quiz saved successfully"),C.push("/quizzes")}catch(i){console.error("Error saving quiz:",i),alert("Failed to save quiz.")}finally{V.value=!1}},j=(i,e)=>{t.questions[i].correct=e},A=()=>{Object.assign(d,{text:"",options:["","","",""],correct:null}),Q.value=!0},I=i=>{d.correct=i},S=()=>{Q.value=!1},J=()=>{w.value&&(t.questions.push({...d}),S())},P=i=>{t.questions.splice(i,1)};return X(()=>{E()}),(i,e)=>{const r=u("font-awesome-icon"),a=u("v-btn"),m=u("v-text-field"),g=u("v-col"),_=u("v-select"),B=u("v-row"),F=u("v-card-title"),M=u("v-card-text"),$=u("v-spacer"),L=u("v-card-actions"),R=u("v-card"),T=u("v-dialog");return f(),v("div",Z,[s("div",ee,[e[7]||(e[7]=s("h1",{class:"text-h4 font-weight-bold"},[p("Edit Questions"),s("span",{class:"text-success"},"(Active)")],-1)),o(a,{color:"success",variant:"text",size:"large",class:"back-btn",onClick:e[0]||(e[0]=n=>Y(C).push("/quizzes"))},{default:l(()=>[o(r,{icon:"fa-solid fa-arrow-left",class:"mr-2"}),e[6]||(e[6]=p(" Back to Quiz List "))]),_:1})]),s("div",te,[o(B,{class:"mb-6"},{default:l(()=>[o(g,{cols:"4"},{default:l(()=>[o(m,{modelValue:t.name,"onUpdate:modelValue":e[1]||(e[1]=n=>t.name=n),label:"Test Name",variant:"outlined",density:"comfortable","bg-color":"white","hide-details":""},null,8,["modelValue"])]),_:1}),o(g,{cols:"4"},{default:l(()=>[o(_,{modelValue:t.category,"onUpdate:modelValue":e[2]||(e[2]=n=>t.category=n),items:D,label:"Category",variant:"outlined",density:"comfortable","bg-color":"white","hide-details":""},null,8,["modelValue"])]),_:1}),o(g,{cols:"4"},{default:l(()=>[o(_,{modelValue:t.grade,"onUpdate:modelValue":e[3]||(e[3]=n=>t.grade=n),items:U,label:"Grade",variant:"outlined",density:"comfortable","bg-color":"white","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),s("div",oe,[e[8]||(e[8]=s("div",{class:"text-h6"},"Questions List",-1)),s("div",se,z(t.duration)+" Mins("+z(t.questions.length)+" Questions)",1)]),s("div",ae,[(f(!0),v(x,null,h(t.questions,(n,c)=>(f(),v("div",{key:c,class:"question-item pa-4 mb-4"},[s("div",ne,[o(m,{modelValue:n.text,"onUpdate:modelValue":y=>n.text=y,class:"question-input",variant:"outlined",density:"comfortable","hide-details":"",placeholder:"Enter your question"},{"prepend-inner":l(()=>[s("div",ie,z(String(c+1).padStart(2,"0")),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),s("div",le,[(f(!0),v(x,null,h(n.options,(y,b)=>(f(),v("div",{key:b,class:G(["option-item",{correct:String.fromCharCode(65+b)===n.correct}]),onClick:q=>j(c,String.fromCharCode(65+b))},[s("span",de,z(String.fromCharCode(65+b)),1),o(m,{modelValue:n.options[b],"onUpdate:modelValue":q=>n.options[b]=q,variant:"plain",density:"comfortable","hide-details":"",placeholder:"Enter option",class:"option-input"},null,8,["modelValue","onUpdate:modelValue"])],10,re))),128))]),s("div",ce,[o(a,{color:"error",variant:"text",size:"small",onClick:y=>P(c),class:"delete-btn"},{default:l(()=>[o(r,{icon:"fa-solid fa-trash",class:"mr-2"}),e[9]||(e[9]=p(" Delete "))]),_:2},1032,["onClick"])])]))),128))]),s("div",ue,[o(a,{color:"success",variant:"outlined",size:"large",onClick:A,class:"action-btn"},{default:l(()=>[o(r,{icon:"fa-solid fa-plus",class:"mr-2"}),e[10]||(e[10]=p(" Add Question "))]),_:1}),o(a,{color:"success",size:"large",class:"save-btn",onClick:O,loading:V.value},{default:l(()=>[o(r,{icon:"fa-solid fa-save",class:"mr-2"}),e[11]||(e[11]=p(" Save Changes "))]),_:1},8,["loading"])])]),o(T,{modelValue:Q.value,"onUpdate:modelValue":e[5]||(e[5]=n=>Q.value=n),"max-width":"800px"},{default:l(()=>[o(R,null,{default:l(()=>[o(F,{class:"text-h5 pa-4"},{default:l(()=>e[12]||(e[12]=[p(" Add New Question ")])),_:1}),o(M,{class:"pa-4"},{default:l(()=>[o(m,{modelValue:d.text,"onUpdate:modelValue":e[4]||(e[4]=n=>d.text=n),label:"Question",variant:"outlined",density:"comfortable",placeholder:"Enter your question",class:"mb-4"},null,8,["modelValue"]),s("div",me,[e[13]||(e[13]=s("div",{class:"text-subtitle-1 mb-2"},"Options",-1)),s("div",pe,[(f(!0),v(x,null,h(d.options,(n,c)=>(f(),v("div",{key:c,class:G(["option-item",{correct:String.fromCharCode(65+c)===d.correct}]),onClick:y=>I(String.fromCharCode(65+c))},[s("span",fe,z(String.fromCharCode(65+c)),1),o(m,{modelValue:d.options[c],"onUpdate:modelValue":y=>d.options[c]=y,placeholder:"Option "+String.fromCharCode(65+c),variant:"outlined",density:"comfortable","hide-details":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])],10,ve))),128))])]),e[14]||(e[14]=s("div",{class:"text-caption text-grey"},"Click on an option to mark it as correct answer",-1))]),_:1}),o(L,{class:"pa-4"},{default:l(()=>[o($),o(a,{color:"grey-darken-1",variant:"text",onClick:S},{default:l(()=>e[15]||(e[15]=[p(" Cancel ")])),_:1}),o(a,{color:"success",variant:"flat",onClick:J,disabled:!w.value,class:"save-btn"},{default:l(()=>e[16]||(e[16]=[p(" Add Question ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},be=H(ge,[["__scopeId","data-v-2fb5fc2e"]]);export{be as default};
