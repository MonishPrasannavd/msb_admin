import{_ as Ne,c as N,l as ze,u as Ue,r as p,q as Le,p as je,m as Fe,v as Re,b as r,j as S,o as w,i as R,e as s,f as a,w as o,t as c,s as Be,g as m,d as K,F as Ee,k as Me,x as g}from"./index-D2pfTnFu.js";import{u as Oe}from"./category-ihc3nzu2.js";const qe={class:"talent-view-container"},Ge={key:0,class:"loading-overlay"},Pe={class:"d-flex justify-space-between align-center px-4 py-3"},Je={class:"text-h5 font-weight-bold"},He={class:"talent-details pa-4"},Ke={class:"talent-avatar-container text-center mb-4"},Qe={class:"text-h6"},We={class:"text-caption text-grey"},Xe={class:"talent-stats"},Ye={class:"stat-item d-flex justify-space-between align-center mb-3"},Ze={class:"stat-item d-flex justify-space-between align-center mb-3"},Te={class:"px-4 py-3"},et={class:"py-3 d-flex align-center"},tt={class:"filter-buttons d-flex align-center mr-4"},at={class:"d-flex align-center mr-4"},st={class:"d-flex align-center mr-4"},lt={class:"text-caption status-text"},nt={class:"d-flex align-center"},ot={class:"text-caption status-text"},it={class:"sub-talents-cards pa-6",style:{"overflow-y":"auto"}},ct={class:"d-flex justify-space-between align-center mb-2"},dt={class:"d-flex align-center"},rt={class:"d-flex align-center status-chip"},ut={class:"text-caption"},vt={class:"text-subtitle-1 font-weight-bold mb-2"},mt={class:"d-flex align-center text-caption text-grey mb-2"},ft={class:"mr-3"},pt={class:"mr-3"},_t={class:"d-flex align-center justify-space-between"},gt={class:"d-flex align-center"},xt={key:0,class:"timer-display"},yt={class:"d-flex align-center text-caption text-grey mb-4"},Dt={class:"d-flex justify-end align-center"},wt={class:"d-flex align-center gap-2"},ht={key:0,class:"text-center pa-8"},St={class:"text-h5 font-weight-bold mb-4"},bt={class:"d-flex flex-wrap gap-6"},Vt={class:"info-item"},kt={class:"text-subtitle-1"},Ct={class:"info-item"},At={class:"text-subtitle-1"},$t={class:"info-item"},It={class:"text-subtitle-1"},Nt={class:"info-item"},zt={class:"text-subtitle-1"},Ut={class:"info-item"},Lt={class:"text-subtitle-1"},jt={class:"info-item"},Ft={class:"text-subtitle-1 d-flex align-center"},Rt={class:"d-flex align-center justify-space-between"},Bt={class:"d-flex align-center"},Et={key:0,class:"timer-display"},Mt={__name:"TalentViewPage",setup(Ot){const pe=Oe(),_e=N(()=>pe.categories),b={success:t=>console.log(`SUCCESS: ${t}`),error:t=>console.error(`ERROR: ${t}`)},Q=ze(),z=Ue(),f=p(null),_=p([]),U=p(""),V=p(!1),B=p(!1),x=p(!1),E=p(!1),d=p(null),ge=p(["Grade 1-4","Grade 5-7","Grade 7-12"]),W=p([]),u=Le({name:"",grade:"",startDate:"",endDate:""}),xe=p(null),M=p(null),k=p(!1),y=p("all"),X=p(0),Y=N(()=>{let t=_.value;if(U.value){const e=U.value.toLowerCase();t=t.filter(i=>{var n,v;return i.name.toLowerCase().includes(e)||((n=i.category)==null?void 0:n.toLowerCase().includes(e))||((v=i.description)==null?void 0:v.toLowerCase().includes(e))})}return y.value!=="all"&&(t=t.filter(e=>y.value==="active"?e.isActive:!e.isActive)),t}),ye=N(()=>_.value.filter(t=>t.isActive).length),De=N(()=>_.value.filter(t=>!t.isActive).length),Z=N(()=>u.name.trim()&&u.grade&&u.startDate&&u.endDate),T=()=>{k.value=!0;const t=Q.params.id;if(!t){b.error("No talent ID provided. Please select a talent."),z.push("/"),k.value=!1;return}const e=JSON.parse(localStorage.getItem("talents")||"[]"),i=_e.value.find(n=>n.id==t);if(!i){b.error("Talent not found."),z.push("/"),k.value=!1;return}f.value=i,_.value=i.subcategories||[],W.value=e.map(n=>({title:n.name,value:n.id})),k.value=!1},we=()=>{x.value=!1,Object.assign(u,{name:"",grade:"",startDate:"",endDate:""}),V.value=!0},he=t=>{x.value=!0,d.value=t,Object.assign(u,{name:t.name,grade:t.grade,startDate:t.startDate,endDate:t.endDate}),V.value=!0},Se=t=>{z.push({name:"SubTalentView",params:{talentId:f.value.id,subTalentId:t.id}})},ee=()=>{V.value=!1,d.value=null},be=async()=>{if(Z.value){E.value=!0;try{const t={id:x.value?d.value.id:Date.now(),name:u.name.trim(),talentName:f.value.id,grade:u.grade,startDate:u.startDate,endDate:u.endDate,isActive:x.value?d.value.isActive:!0,addedDate:x.value?d.value.addedDate:new Date().toLocaleDateString(),talentId:f.value.id};if(x.value){const e=_.value.findIndex(i=>i.id===t.id);e!==-1&&(_.value[e]=t)}else _.value.push(t);localStorage.setItem(`subTalents_${f.value.id}`,JSON.stringify(_.value)),ee(),b.success(`Sub-talent ${x.value?"updated":"added"} successfully!`)}catch(t){console.error("Error saving sub-talent:",t),b.error("Failed to save sub-talent. Please try again.")}finally{E.value=!1}}},Ve=t=>{const e=_.value.find(i=>i.id===t);e&&(e.isActive=!e.isActive,localStorage.setItem(`subTalents_${f.value.id}`,JSON.stringify(_.value)),b.success(`Sub-talent ${e.isActive?"activated":"deactivated"} successfully!`))},te=t=>{const e=W.value.find(i=>i.value===t);return e?e.title:"N/A"},ae=t=>{if(!t)return"N/A";const e=new Date(t);return e.toLocaleDateString()+" "+e.toLocaleTimeString()},O=t=>{y.value=t},L=t=>{if(!(t!=null&&t.startDate)||!(t!=null&&t.endDate))return"inactive";const e=new Date,i=new Date(t.startDate),n=new Date(t.endDate);return e<i?"upcoming":e>=i&&e<=n?"active":"inactive"},se=t=>{if(!(t!=null&&t.startDate)||!(t!=null&&t.endDate))return"fa-solid fa-clock";const e=new Date,i=new Date(t.startDate),n=new Date(t.endDate);return e<i?"fa-solid fa-arrow-up":e>=i&&e<=n?"fa-solid fa-check-circle":"fa-solid fa-arrow-down"},q=t=>{const e=L(t);return e==="upcoming"||e==="active"?"text-success":e==="inactive"?"text-warning":"text-grey"},le=t=>{const e=L(t);return!(t!=null&&t.startDate)||!(t!=null&&t.endDate)?"Not Scheduled":e==="upcoming"?"Upcoming":e==="active"?"Active":"Inactive"},j=t=>q(t),G=t=>{const e=Math.floor(t/864e5),i=Math.floor(t%(1e3*60*60*24)/(1e3*60*60)),n=Math.floor(t%(1e3*60*60)/(1e3*60)),v=Math.floor(t%(1e3*60)/1e3);return e>0?`${e}d ${i}h ${n}m`:i>0?`${i}h ${n}m ${v}s`:n>0?`${n}m ${v}s`:`${v}s`},F=t=>{if(!(t!=null&&t.startDate)||!(t!=null&&t.endDate))return null;X.value;const e=new Date,i=new Date(t.startDate),n=new Date(t.endDate);return e<i?G(i-e):e>=i&&e<=n?G(n-e):G(e-n)};return je(()=>Q.params.id,(t,e)=>{t&&t!==e&&T()}),Fe(()=>{T(),M.value=setInterval(()=>{X.value++},1e3)}),Re(()=>{M.value&&clearInterval(M.value)}),(t,e)=>{const i=r("v-progress-circular"),n=r("font-awesome-icon"),v=r("v-btn"),ke=r("v-img"),ne=r("v-icon"),Ce=r("v-avatar"),oe=r("v-divider"),ie=r("v-chip"),C=r("v-col"),A=r("v-text-field"),P=r("v-spacer"),Ae=r("v-switch"),J=r("v-card"),H=r("v-row"),ce=r("v-card-title"),$e=r("v-select"),Ie=r("v-form"),de=r("v-card-text"),re=r("v-card-actions"),ue=r("v-dialog");return w(),S("div",qe,[k.value?(w(),S("div",Ge,[s(i,{indeterminate:"",color:"success",size:"64"}),e[13]||(e[13]=a("p",{class:"mt-4 text-h6"},"Loading talent data...",-1))])):R("",!0),s(H,{"no-gutters":"",class:"px-2",style:{height:"100vh"}},{default:o(()=>[s(C,{cols:"3",class:"talent-info-section d-flex flex-column nav-border"},{default:o(()=>{var l,h,$;return[a("div",Pe,[a("span",Je,c(((l=f.value)==null?void 0:l.name)||"Talent"),1),s(v,{color:"success",variant:"text",size:"small",onClick:e[0]||(e[0]=D=>Be(z).push("/categories"))},{default:o(()=>[s(n,{icon:"fa-solid fa-arrow-left",class:"mr-2"}),e[14]||(e[14]=m(" Back "))]),_:1})]),a("div",He,[a("div",Ke,[s(Ce,{size:"120",class:"mb-3"},{default:o(()=>{var D,I;return[(D=f.value)!=null&&D.icon?(w(),K(ke,{key:0,src:f.value.icon,alt:(I=f.value)==null?void 0:I.name,cover:""},null,8,["src","alt"])):(w(),K(ne,{key:1,icon:"mdi-account",size:"60",color:"grey"}))]}),_:1}),a("h3",Qe,c((h=f.value)==null?void 0:h.name),1),a("p",We,"Added: "+c(($=f.value)==null?void 0:$.addedDate),1)]),s(oe,{class:"mb-4"}),a("div",Xe,[a("div",Ye,[e[15]||(e[15]=a("span",{class:"text-body-2"},"Media Type:",-1)),s(ie,{color:"info",size:"small"},{default:o(()=>{var D;return[m(c(((D=f.value)==null?void 0:D.type)||"N/A"),1)]}),_:1})]),a("div",Ze,[e[16]||(e[16]=a("span",{class:"text-body-2"},"Total Sub-talents:",-1)),s(ie,{color:"success",size:"small"},{default:o(()=>[m(c(_.value.length||"see shit"),1)]),_:1})])])]),a("div",Te,[s(v,{color:"success",class:"text-none add-sub-talent-btn",onClick:we,size:"large",block:""},{default:o(()=>[s(n,{icon:"fa-solid fa-plus",class:"mr-2"}),e[17]||(e[17]=m(" Add Sub-talent "))]),_:1})])]}),_:1}),s(C,{cols:"9",class:"content-section px-5"},{default:o(()=>[a("div",et,[s(A,{modelValue:U.value,"onUpdate:modelValue":e[1]||(e[1]=l=>U.value=l),placeholder:"Search sub-talents...",variant:"solo",rounded:"lg",density:"compact","hide-details":"",class:"mr-4 border-0 input-search","bg-color":"white",style:{"max-width":"450px"}},{"prepend-inner":o(()=>[s(n,{icon:"fa-solid fa-search",class:"search-icon"})]),_:1},8,["modelValue"]),a("div",tt,[s(n,{icon:"fa-solid fa-filter",class:"filter-icon mr-2"}),s(v,{variant:y.value==="all"?"flat":"outlined",color:y.value==="all"?"success":"grey",size:"small",class:"mr-2",onClick:e[2]||(e[2]=l=>O("all"))},{default:o(()=>e[18]||(e[18]=[m(" All ")])),_:1},8,["variant","color"]),s(v,{variant:y.value==="active"?"flat":"outlined",color:y.value==="active"?"success":"grey",size:"small",class:"mr-2",onClick:e[3]||(e[3]=l=>O("active"))},{default:o(()=>e[19]||(e[19]=[m(" Active ")])),_:1},8,["variant","color"]),s(v,{variant:y.value==="inactive"?"flat":"outlined",color:y.value==="inactive"?"success":"grey",size:"small",onClick:e[4]||(e[4]=l=>O("inactive"))},{default:o(()=>e[20]||(e[20]=[m(" Inactive ")])),_:1},8,["variant","color"])]),s(P),a("div",at,[a("div",st,[s(n,{icon:"fa-solid fa-circle",class:"mr-1 text-success"}),a("span",lt,"Active("+c(ye.value)+")",1)]),a("div",nt,[s(n,{icon:"fa-solid fa-circle",class:"mr-1 text-warning"}),a("span",ot,"Inactive("+c(De.value)+")",1)])])]),a("div",it,[s(H,null,{default:o(()=>[(w(!0),S(Ee,null,Me(Y.value,l=>(w(),K(C,{key:l.id,cols:"12",md:"6"},{default:o(()=>[s(J,{flat:"",class:"pa-4 rounded-lg sub-talent-card"},{default:o(()=>[a("div",ct,[a("div",dt,[s(Ae,{"model-value":l.isActive,color:"success","hide-details":"",density:"compact",inset:"",class:"compact-switch mr-3",style:{transform:"scale(0.8)","transform-origin":"left center"},"onUpdate:modelValue":h=>Ve(l.id)},null,8,["model-value","onUpdate:modelValue"]),a("div",rt,[s(n,{icon:["fas","circle"],class:g([l.isActive?"text-success":"text-warning","mr-1"]),size:"sm"},null,8,["class"]),a("span",ut,c(l.isActive?"Active":"Inactive"),1)])])]),a("div",vt,c(l.name),1),a("div",mt,[a("span",ft,[s(n,{icon:"fa-solid fa-user",class:"mr-1"}),m(" "+c(te(l.talentName)),1)]),s(oe,{vertical:"",class:"mx-2"}),a("span",pt,[s(n,{icon:"fa-solid fa-graduation-cap",class:"mr-1"}),m(" "+c(l.grade),1)])]),a("div",{class:g(["timer-section mb-3 pa-2 rounded",L(l)])},[a("div",_t,[a("div",gt,[s(n,{icon:se(l),class:g([q(l),"mr-2"]),size:"sm"},null,8,["icon","class"]),a("span",{class:g(["text-caption font-weight-medium",j(l)])},c(le(l)),3)]),F(l)?(w(),S("div",xt,[a("span",{class:g(["text-caption font-weight-bold",j(l)])},c(F(l)),3)])):R("",!0)])],2),a("div",yt,[a("span",null,c(l.addedDate),1)]),a("div",Dt,[a("div",wt,[s(v,{variant:"text",class:"action-btn view-btn",size:"small",onClick:h=>Se(l)},{default:o(()=>[s(n,{icon:"fa-solid fa-eye",class:"mr-2"}),e[21]||(e[21]=m(" View "))]),_:2},1032,["onClick"]),s(v,{variant:"text",class:"action-btn edit-btn",size:"small",onClick:h=>he(l)},{default:o(()=>[s(n,{icon:"fa-solid fa-pencil",class:"mr-2"}),e[22]||(e[22]=m(" Edit "))]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),Y.value.length===0?(w(),S("div",ht,[s(ne,{icon:"mdi-account-group-outline",size:"64",color:"grey",class:"mb-4"}),e[23]||(e[23]=a("h3",{class:"text-h6 text-grey-darken-1 mb-2"},"No Sub-talents Found",-1)),e[24]||(e[24]=a("p",{class:"text-body-1 text-grey"},'Click "Add Sub-talent" to get started',-1))])):R("",!0)])]),_:1})]),_:1}),s(ue,{modelValue:V.value,"onUpdate:modelValue":e[10]||(e[10]=l=>V.value=l),"max-width":"600",persistent:""},{default:o(()=>[s(J,{class:"sub-talent-dialog"},{default:o(()=>[s(ce,{class:"text-h5 pa-4"},{default:o(()=>[m(c(x.value?"Edit":"Add")+" Sub-talent ",1)]),_:1}),s(de,{class:"pa-4"},{default:o(()=>[s(Ie,{ref_key:"subTalentFormRef",ref:xe},{default:o(()=>[s(A,{modelValue:u.name,"onUpdate:modelValue":e[5]||(e[5]=l=>u.name=l),label:"Sub-talent Name",variant:"outlined",density:"comfortable",placeholder:"Enter sub-talent name",class:"mb-4",required:""},null,8,["modelValue"]),s(A,{modelValue:f.value.name,"onUpdate:modelValue":e[6]||(e[6]=l=>f.value.name=l),label:"Talent Name",variant:"outlined",density:"comfortable",readonly:"",class:"mb-4"},null,8,["modelValue"]),s($e,{modelValue:u.grade,"onUpdate:modelValue":e[7]||(e[7]=l=>u.grade=l),items:ge.value,label:"Grade",variant:"outlined",density:"comfortable",placeholder:"Select grade",class:"mb-4",required:""},null,8,["modelValue","items"]),s(H,null,{default:o(()=>[s(C,{cols:"6"},{default:o(()=>[s(A,{modelValue:u.startDate,"onUpdate:modelValue":e[8]||(e[8]=l=>u.startDate=l),label:"Start Date",variant:"outlined",density:"comfortable",type:"datetime-local",placeholder:"Select start date",class:"mb-4",required:""},null,8,["modelValue"])]),_:1}),s(C,{cols:"6"},{default:o(()=>[s(A,{modelValue:u.endDate,"onUpdate:modelValue":e[9]||(e[9]=l=>u.endDate=l),label:"End Date",variant:"outlined",density:"comfortable",type:"datetime-local",placeholder:"Select end date",class:"mb-4",required:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},512)]),_:1}),s(re,{class:"pa-4"},{default:o(()=>[s(P),s(v,{color:"grey-darken-1",variant:"text",onClick:ee},{default:o(()=>e[25]||(e[25]=[m(" Cancel ")])),_:1}),s(v,{color:"success",variant:"flat",onClick:be,loading:E.value,disabled:!Z.value,class:"add-sub-talent-btn-dialog"},{default:o(()=>[m(c(x.value?"Update":"Add")+" Sub-talent ",1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(ue,{modelValue:B.value,"onUpdate:modelValue":e[12]||(e[12]=l=>B.value=l),width:"700"},{default:o(()=>[s(J,{class:"sub-talent-view-dialog"},{default:o(()=>[s(ce,{class:"d-flex flex-column align-start pa-6"},{default:o(()=>{var l,h,$,D,I,ve,me,fe;return[a("div",St,c((l=d.value)==null?void 0:l.name),1),a("div",bt,[a("div",Vt,[e[26]||(e[26]=a("div",{class:"text-caption text-medium-emphasis"},"Talent",-1)),a("div",kt,c(te((h=d.value)==null?void 0:h.talentName)),1)]),a("div",Ct,[e[27]||(e[27]=a("div",{class:"text-caption text-medium-emphasis"},"Grade",-1)),a("div",At,c(($=d.value)==null?void 0:$.grade),1)]),a("div",$t,[e[28]||(e[28]=a("div",{class:"text-caption text-medium-emphasis"},"Start Date",-1)),a("div",It,c(ae((D=d.value)==null?void 0:D.startDate)),1)]),a("div",Nt,[e[29]||(e[29]=a("div",{class:"text-caption text-medium-emphasis"},"End Date",-1)),a("div",zt,c(ae((I=d.value)==null?void 0:I.endDate)),1)]),a("div",Ut,[e[30]||(e[30]=a("div",{class:"text-caption text-medium-emphasis"},"Added Date",-1)),a("div",Lt,c((ve=d.value)==null?void 0:ve.addedDate),1)]),a("div",jt,[e[31]||(e[31]=a("div",{class:"text-caption text-medium-emphasis"},"Status",-1)),a("div",Ft,[s(n,{icon:["fas","circle"],class:g([(me=d.value)!=null&&me.isActive?"text-success":"text-warning","mr-2"]),size:"sm"},null,8,["class"]),m(" "+c((fe=d.value)!=null&&fe.isActive?"Active":"Inactive"),1)])])])]}),_:1}),s(de,{class:"pa-6 pt-0"},{default:o(()=>[a("div",{class:g(["timer-section mb-4 pa-3 rounded",L(d.value)])},[a("div",Rt,[a("div",Bt,[s(n,{icon:se(d.value),class:g([q(d.value),"mr-2"]),size:"sm"},null,8,["icon","class"]),a("span",{class:g(["text-subtitle-2 font-weight-medium",j(d.value)])},c(le(d.value)),3)]),F(d.value)?(w(),S("div",Et,[a("span",{class:g(["text-subtitle-2 font-weight-bold",j(d.value)])},c(F(d.value)),3)])):R("",!0)])],2)]),_:1}),s(re,{class:"pa-6 pt-0"},{default:o(()=>[s(P),s(v,{color:"success",variant:"text",onClick:e[11]||(e[11]=l=>B.value=!1)},{default:o(()=>e[32]||(e[32]=[m(" Close ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Pt=Ne(Mt,[["__scopeId","data-v-4598c9a1"]]);export{Pt as default};
