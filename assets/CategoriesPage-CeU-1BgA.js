import{c as b,r as v,p as X,m as Z,b as o,j as ee,o as C,f as i,e as t,w as a,g as r,d as j,i as q,t as _,s as te,h as le}from"./index-DinSSoxo.js";import{u as ae}from"./category-CGanrx3f.js";const oe={class:"px-5 py-2"},ne={class:"ps-3 text-subtitle-1"},se={class:"text-h6"},ie={class:"d-flex align-center gap-4"},ce={__name:"CategoriesPage",setup(ue){const s=ae(),A=b(()=>s.categories),m=b(()=>s.pagination),n=v({id:null,name:"",icon:"",is_future:0,type:0}),f=v(""),D=v({page:1,itemsPerPage:10,sortBy:[],sortDesc:[]}),p=v(!1),z=b(()=>s.loading),E=[{title:"Name",value:"name"},{title:"Icon",value:"icon"},{title:"Is Future",value:"is_future"},{title:"Type",value:"type"},{title:"Actions",value:"actions",sortable:!1}],c=(u=1)=>{s.fetchCategories({page:u,per_page:m.value.per_page||10,search:f.value})};X(D,c,{deep:!0}),Z(c);const V=async()=>{n.value.id?await s.updateCategory(n.value.id,n.value):await s.createCategory(n.value),y(),g(),c()},F=async u=>{await s.deleteCategory(u),c()},w=(u=null)=>{u?n.value={...u}:y(),p.value=!0},g=()=>{p.value=!1,y()},y=()=>{n.value={id:null,name:"",icon:null,is_future:!1,type:0}};return(u,e)=>{var S,B,I;const d=o("v-btn"),x=o("v-col"),P=o("font-awesome-icon"),k=o("v-text-field"),$=o("v-row"),M=o("v-img"),N=o("v-chip"),h=o("v-data-table"),T=o("v-icon"),O=o("v-card-title"),U=o("v-divider"),R=o("v-file-input"),Y=o("v-switch"),G=o("v-select"),H=o("v-form"),J=o("v-card-text"),K=o("v-card-actions"),L=o("v-card"),Q=o("v-dialog");return C(),ee("div",oe,[e[15]||(e[15]=i("h2",{class:"mb-4"},"Talents",-1)),t($,{"no-gutters":"",justify:"space-between"},{default:a(()=>[t(x,{cols:"3"},{default:a(()=>[t(d,{class:"mb-4 add-category",onClick:e[0]||(e[0]=l=>w())},{default:a(()=>e[7]||(e[7]=[i("i",{class:"fa-solid fa-plus me-2"},null,-1),r(" Add Category ")])),_:1})]),_:1}),t(x,{cols:"4"},{default:a(()=>[t(k,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=l=>f.value=l),label:"Search by Talent Name ..",variant:"solo",rounded:"lg","bg-color":"white",density:"compact",class:"mb-4 input-search",clearable:"",onInput:c},{"prepend-inner":a(()=>[t(P,{icon:"fa-solid fa-search",class:"search-icon"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(h,{items:A.value,headers:E,loading:te(s).loading,"items-per-page":((S=m.value)==null?void 0:S.per_page)||10,page:((B=m.value)==null?void 0:B.page)||1,"server-items-length":((I=m.value)==null?void 0:I.total)||0,"onUpdate:page":c,class:"rounded-lg responsive-table","fixed-header":""},{"item.actions":a(({item:l})=>[t(d,{onClick:W=>w(l),icon:"mdi-plus",density:"comfortable",class:"me-4 edit-btn"},{default:a(()=>e[8]||(e[8]=[i("i",{class:"fa-solid fa-pen-to-square"},null,-1)])),_:2},1032,["onClick"]),t(d,{onClick:W=>F(l.id),icon:"mdi-plus",density:"comfortable",class:"me-4 delete-btn"},{default:a(()=>e[9]||(e[9]=[i("i",{class:"fa-solid fa-trash"},null,-1)])),_:2},1032,["onClick"]),t(d,{to:{name:"TalentView",params:{id:l.id}},icon:"mdi-plus",density:"comfortable",class:"me-4 view-btn"},{default:a(()=>e[10]||(e[10]=[i("i",{class:"bi bi-eye-fill"},null,-1)])),_:2},1032,["to"])]),"item.icon":a(({item:l})=>[t(M,{width:50,cover:"",src:l.icon_url},null,8,["src"])]),"item.name":a(({item:l})=>[i("p",ne,_(l.name),1)]),"item.is_future":a(({item:l})=>[l.is_future==0?(C(),j(N,{key:0,variant:"flat",color:"red",size:"small"},{default:a(()=>e[11]||(e[11]=[r(" NO ")])),_:1})):q("",!0),l.is_future==1?(C(),j(N,{key:1,variant:"flat",color:"green",size:"small"},{default:a(()=>e[12]||(e[12]=[r(" YES ")])),_:1})):q("",!0)]),_:1},8,["items","loading","items-per-page","page","server-items-length"]),t(Q,{modelValue:p.value,"onUpdate:modelValue":e[6]||(e[6]=l=>p.value=l),"max-width":"480"},{default:a(()=>[t(L,null,{default:a(()=>[t(O,{class:"justify-space-between align-center"},{default:a(()=>[i("span",se,_(n.value.id?"Edit Category":"Add Category"),1),t(d,{icon:"",onClick:g,variant:"text"},{default:a(()=>[t(T,null,{default:a(()=>e[13]||(e[13]=[r("mdi-close")])),_:1})]),_:1})]),_:1}),t(U),t(J,null,{default:a(()=>[t(H,{ref:"formRef",onSubmit:le(V,["prevent"]),class:"d-flex flex-column gap-4"},{default:a(()=>[t(k,{modelValue:n.value.name,"onUpdate:modelValue":e[2]||(e[2]=l=>n.value.name=l),label:"Category Name",rules:[l=>!!l||"Name is required"],required:"","prepend-inner-icon":"mdi-tag"},null,8,["modelValue","rules"]),t(R,{modelValue:n.value.icon,"onUpdate:modelValue":e[3]||(e[3]=l=>n.value.icon=l),label:"Category Icon",accept:"image/*",multiple:!1,clearable:"","show-size":"","prepend-icon":"mdi-image"},null,8,["modelValue"]),i("div",ie,[t(Y,{modelValue:n.value.is_future,"onUpdate:modelValue":e[4]||(e[4]=l=>n.value.is_future=l),label:"Is Future?",inset:""},null,8,["modelValue"]),t(G,{modelValue:n.value.type,"onUpdate:modelValue":e[5]||(e[5]=l=>n.value.type=l),items:[{title:"Type 0",value:0},{title:"Type 1",value:1},{title:"Type 2",value:2}],label:"Type",class:"flex-grow-1",required:""},null,8,["modelValue"])])]),_:1},512)]),_:1}),t(U),t(K,{class:"justify-end"},{default:a(()=>[t(d,{variant:"text",onClick:g},{default:a(()=>e[14]||(e[14]=[r("Cancel")])),_:1}),t(d,{color:"primary",loading:z.value,onClick:V,variant:"flat"},{default:a(()=>[t(T,{left:""},{default:a(()=>[r(_(n.value.id?"mdi-content-save":"mdi-plus"),1)]),_:1}),r(" "+_(n.value.id?"Update":"Add"),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{ce as default};
