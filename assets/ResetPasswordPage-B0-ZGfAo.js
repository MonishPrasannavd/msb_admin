import{l as T,u as Z,r as n,c as w,m as H,b as t,d as v,o as r,w as s,e as a,i as y,g as u,j as N,f as h,h as J,t as B}from"./index-D2pfTnFu.js";import{u as K}from"./vuex.esm-bundler-IuTXkf8E.js";const O={key:0},Q={key:1},oe={__name:"ResetPasswordPage",setup(W){const m=K(),M=T(),S=Z(),d=n(""),b=n(""),i=n(!1),c=n(!1),_=n(!1),p=n(!1),g=n(""),f=n(""),k=n(null),P=w(()=>m.getters["auth/authLoading"]),V=w(()=>m.getters["auth/authError"]),U=[o=>!!o||"Password is required",o=>o.length>=8||"Password must be at least 8 characters",o=>/[A-Z]/.test(o)||"Password must contain at least one uppercase letter",o=>/[0-9]/.test(o)||"Password must contain at least one number"],j=w(()=>[o=>!!o||"Confirm password is required",o=>o===d.value||"Passwords do not match"]);H(()=>{f.value=M.query.token,f.value||S.push("/login")});const x=async()=>{const{valid:o}=await k.value.validate();if(o)try{const e=await m.dispatch("auth/resetPassword",{token:f.value,password:d.value});g.value=e.message,p.value=!0}catch(e){console.error("Failed to reset password:",e)}};return(o,e)=>{const E=t("v-toolbar-title"),F=t("v-toolbar"),C=t("v-text-field"),I=t("v-form"),R=t("v-alert"),L=t("v-card-text"),q=t("v-btn"),Y=t("v-spacer"),$=t("v-card-actions"),z=t("v-card"),A=t("v-col"),D=t("v-row"),G=t("v-container");return r(),v(G,{class:"fill-height",fluid:""},{default:s(()=>[a(D,{align:"center",justify:"center"},{default:s(()=>[a(A,{cols:"12",sm:"8",md:"6",lg:"4"},{default:s(()=>[a(z,{class:"elevation-12"},{default:s(()=>[a(F,{color:"primary",dark:"",flat:""},{default:s(()=>[a(E,null,{default:s(()=>e[5]||(e[5]=[u("Reset Password")])),_:1})]),_:1}),a(L,null,{default:s(()=>[p.value?(r(),N("div",Q,[a(R,{type:"success",class:"mb-4"},{default:s(()=>[u(B(g.value),1)]),_:1}),e[7]||(e[7]=h("p",{class:"text-body-1"}," Your password has been reset successfully. You can now login with your new password. ",-1))])):(r(),N("div",O,[e[6]||(e[6]=h("p",{class:"text-subtitle-1 mb-4"}," Please enter your new password below. ",-1)),a(I,{ref_key:"form",ref:k,modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=l=>_.value=l),"lazy-validation":"",onSubmit:J(x,["prevent"])},{default:s(()=>[a(C,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=l=>d.value=l),rules:U,label:"New Password","prepend-icon":"mdi-lock","append-inner-icon":i.value?"mdi-eye":"mdi-eye-off",type:i.value?"text":"password","onClick:appendInner":e[1]||(e[1]=l=>i.value=!i.value),required:""},null,8,["modelValue","append-inner-icon","type"]),a(C,{modelValue:b.value,"onUpdate:modelValue":e[2]||(e[2]=l=>b.value=l),rules:j.value,label:"Confirm Password","prepend-icon":"mdi-lock-check","append-inner-icon":c.value?"mdi-eye":"mdi-eye-off",type:c.value?"text":"password","onClick:appendInner":e[3]||(e[3]=l=>c.value=!c.value),required:""},null,8,["modelValue","rules","append-inner-icon","type"])]),_:1},8,["modelValue"])]))]),_:1}),a($,null,{default:s(()=>[p.value?(r(),v(q,{key:0,variant:"text",to:"/login"},{default:s(()=>e[8]||(e[8]=[u(" Go to Login ")])),_:1})):y("",!0),a(Y),p.value?y("",!0):(r(),v(q,{key:1,color:"primary",loading:P.value,disabled:!_.value||P.value,onClick:x},{default:s(()=>e[9]||(e[9]=[u(" Reset Password ")])),_:1},8,["loading","disabled"]))]),_:1}),V.value?(r(),v(R,{key:0,type:"error",dismissible:"",class:"ma-3"},{default:s(()=>[u(B(V.value),1)]),_:1})):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}};export{oe as default};
